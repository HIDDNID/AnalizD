import pandas as pd
import matplotlib.pyplot as plt

# Исходные данные
data = {
    'name': ['Иван Петров', 'Алиса Смирнова', 'Мария Иванова', 'Сергей Кузнецов', 'Ольга Васильева', 'Дмитрий Соколов', 'Екатерина Морозова', 'Наталья Сергеева', 'Михаил Андреев', 'Софья Попова'],
    'subject': ['Физкультура', 'Математика', 'Обществознание', 'Физика', 'Химия']
}

# Создаем DataFrame с учениками и предметами
students_df = pd.DataFrame(data['name'], columns=['name'])
subjects_df = pd.DataFrame(data['subject'], columns=['subject'])

# Создаем полную комбинацию студентов и предметов
full_combination = students_df.assign(key=1).merge(subjects_df.assign(key=1), on='key').drop('key', axis=1)

# Задаем конкретные оценки для каждого ученика и предмета
grades = [
    # Оценки для Ивана Петрова
    [4, 3, 4, 4, 5],
    # Оценки для Алисы Смирновой
    [3, 5, 5, 4, 3],
    # Оценки для Марии Ивановой
    [4, 4, 3, 5, 4],
    # Оценки для Сергея Кузнецова
    [5, 4, 3, 4, 5],
    # Оценки для Ольги Васильевой
    [3, 5, 4, 5, 4],
    # Оценки для Дмитрия Соколова
    [4, 3, 5, 4, 5],
    # Оценки для Екатерины Морозовой
    [5, 4, 3, 5, 4],
    # Оценки для Натальи Сергеевой
    [3, 5, 4, 5, 4],
    # Оценки для Михаила Андреева
    [4, 3, 5, 4, 5],
    # Оценки для Софьи Поповой
    [5, 4, 3, 5, 4]
]

# Добавляем столбец grade с заданными оценками
# Преобразуем массив оценок в плоскую структуру
flat_grades = [item for sublist in grades for item in sublist]

# Присваиваем оценки каждой строке DataFrame
full_combination['grade'] = flat_grades

# Фильтруем DataFrame, оставляя только оценки по математике
math_grades = full_combination.query("subject == 'Математика'")

# Вычисляем стандартное отклонение
standard_deviation = math_grades['grade'].std()

# Выводим результат стандартного отклонения
print(f"Стандартное отклонение: {standard_deviation:.2f}")

# Вычисляем Q1 и Q3 с помощью quantile()
quartiles = math_grades['grade'].quantile([0.25, 0.75])

# Вычисляем IQR
iqr = quartiles[0.75] - quartiles[0.25]

# Выводим результат первого и третьего квартиля,а так же размаха
print(f"Первый квартиль (Q1): {quartiles[0.25]:.2f}")
print(f"Третий квартиль (Q3): {quartiles[0.75]:.2f}")
print(f"Межквартильный размах (IQR): {iqr:.2f}")